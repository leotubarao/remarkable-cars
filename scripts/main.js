const isValid=a=>{if(a.checkValidity)return a.checkValidity();let e=!0;const t=$(a).val(),s=$(a).attr("type"),i=a.attr("required");return t?e=!("email"===s&&!/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(t)):i&&(e=!1),$(a)[(e?"remove":"add")+"Class"]("is-invalid"),e},getInputValues=a=>{let e=[],t=!0;return a.find("[data-form-field]").each((function(){isValid(this)||(t=!1),e.push([$(this).attr("data-form-field")||$(this).attr("name"),$(this).val()])})),e=JSON.stringify(e),{isValidForm:t,data:e}};$((function(){$('[data-form-type="ltco_form"]').each((function(){const a=$(this),e=a.find('[data-form-field]:not([type="hidden"])'),t=a.find("[data-form-alert]"),s=a.find('[type="submit"]'),i=s.text();a.on("submit",(function(d){d.preventDefault(),a.addClass("was-validated");let{isValidForm:n,data:l}=getInputValues(a);n&&$.ajax({url:"./includes/send.php",data:l,type:"POST",beforeSend:a=>{s.text("ENVIANDO...").prop("disabled",!0),e.removeClass("is-invalid"),t.prop("hidden",!0),t.removeClass("alert-success alert-danger")},success:a=>{const s=JSON.parse(a);t.text(s.message||"Mensagem enviada com sucesso!"),t.addClass(`alert-${s.class||"success"}`),t.prop("hidden",!1),e.val("")}}).done((function(){a.removeClass("was-validated"),s.text(i).prop("disabled",!1)}))}))}))}));